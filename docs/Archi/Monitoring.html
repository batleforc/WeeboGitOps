<!doctype html>
<html lang="fr" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Archi/Monitoring">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Monitoring | WeeboGitOps</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://batleforc.weebo.fr/WeeboGitOps/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://batleforc.weebo.fr/WeeboGitOps/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://batleforc.weebo.fr/WeeboGitOps/docs/Archi/Monitoring"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Monitoring | WeeboGitOps"><meta data-rh="true" name="description" content="Having a cluster is great, but it&#x27;s not enough. We need to monitor it. For that, we use what&#x27;s called an extended PromStack."><meta data-rh="true" property="og:description" content="Having a cluster is great, but it&#x27;s not enough. We need to monitor it. For that, we use what&#x27;s called an extended PromStack."><link data-rh="true" rel="icon" href="/WeeboGitOps/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://batleforc.weebo.fr/WeeboGitOps/docs/Archi/Monitoring"><link data-rh="true" rel="alternate" href="https://batleforc.weebo.fr/WeeboGitOps/docs/Archi/Monitoring" hreflang="fr"><link data-rh="true" rel="alternate" href="https://batleforc.weebo.fr/WeeboGitOps/docs/Archi/Monitoring" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/WeeboGitOps/blog/rss.xml" title="WeeboGitOps RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/WeeboGitOps/blog/atom.xml" title="WeeboGitOps Atom Feed"><link rel="stylesheet" href="/WeeboGitOps/assets/css/styles.150abd4c.css">
<link rel="preload" href="/WeeboGitOps/assets/js/runtime~main.1a317065.js" as="script">
<link rel="preload" href="/WeeboGitOps/assets/js/main.c63e4caf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/WeeboGitOps/"><div class="navbar__logo"><img src="/WeeboGitOps/img/logo.svg" alt="WeeboGitOps Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/WeeboGitOps/img/logo.svg" alt="WeeboGitOps Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">WeebpGitOps</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/WeeboGitOps/docs/intro">Doc</a><a class="navbar__item navbar__link" href="/WeeboGitOps/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/batleforc/WeeboGitOps" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode sombre)" aria-label="Basculer entre le mode sombre et clair (actuellement mode sombre)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Retour au début de la page" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/WeeboGitOps/docs/intro">Getting started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/WeeboGitOps/docs/category/project-architecture">Project architecture</a><button aria-label="Plier/Déplier la catégorie &#x27;Project architecture&#x27; de la barre latérale" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/WeeboGitOps/docs/Archi/CiCD">CI / CD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/WeeboGitOps/docs/Archi/Monitoring">Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/WeeboGitOps/docs/Archi/Node">Node</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/WeeboGitOps/docs/category/ci--cd">CI / CD</a><button aria-label="Plier/Déplier la catégorie &#x27;CI / CD&#x27; de la barre latérale" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Fil d&#x27;Ariane"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Page d&#x27;accueil" class="breadcrumbs__link" href="/WeeboGitOps/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/WeeboGitOps/docs/category/project-architecture"><span itemprop="name">Project architecture</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Monitoring</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Sur cette page</button></div><div class="theme-doc-markdown markdown"><h1>Monitoring</h1><p>Having a cluster is great, but it&#x27;s not enough. We need to monitor it. For that, we use what&#x27;s called an extended PromStack.</p><p>Monitoring is a very important part of a cluster. It allows us to know the current state of our cluster and to be alerted when something goes wrong. And if things go wrong, we can use the logs and traces to find the root cause of the problem.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="grafana">Grafana<a href="#grafana" class="hash-link" aria-label="Lien direct vers Grafana" title="Lien direct vers Grafana">​</a></h2><p>Grafana is a dashboarding tool that can display data from multiple &quot;datasources&quot;. In our case, we use Prometheus to collect, querry and store metrics, Loki for logs and Tempo for traces.</p><p>If you are collecting the right data, you can create some nice dashboard like this one that allow me to know the current state of my cluster:</p><p><img loading="lazy" alt="Grafana Dashboard" src="/WeeboGitOps/assets/images/dashboard-k3s-efa130ccf29ad42085f6adc62475c2b4.png" width="947" height="594" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus">Prometheus<a href="#prometheus" class="hash-link" aria-label="Lien direct vers Prometheus" title="Lien direct vers Prometheus">​</a></h2><p>Prometheus is a monitoring tool that collect metrics from multiple sources. It can also querry the data it collected and store it. It&#x27;s the main datasource of Grafana.</p><p>With the help of grafana and PromQL, we can for exemple querry every metrics collected in the &quot;monitoring&quot; namespace and display them in a graph:</p><p><img loading="lazy" alt="Prometheus Querry" src="/WeeboGitOps/assets/images/explore-prom-monitoring-4e21e80833063274f9c07f0cd8612d1b.png" width="950" height="957" class="img_ev3q"></p><p>Here without formating, it doesn&#x27;t make sense because there is too much different data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="loki">Loki<a href="#loki" class="hash-link" aria-label="Lien direct vers Loki" title="Lien direct vers Loki">​</a></h2><p>Loki is a service that allow to store and explore logs. It&#x27;s the main datasource of Grafana for logs.</p><p>With the help of grafana and LogQL, we can for exemple querry every logs collected in the &quot;monitoring&quot; namespace and display them in a table:</p><p><img loading="lazy" alt="Loki Querry" src="/WeeboGitOps/assets/images/explore-loki-b2a621594e9bac6a0f1a957f7fd994f2.png" width="955" height="957" class="img_ev3q"></p><p>Here without formating, it doesn&#x27;t make sense because there is too much different log.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tempo">Tempo<a href="#tempo" class="hash-link" aria-label="Lien direct vers Tempo" title="Lien direct vers Tempo">​</a></h2><p>Tempo is a service that allow to store and explore traces. It&#x27;s the main datasource of Grafana for traces. Tempo is able to store traces from multiple sources like Jaeger or OpenTelemetry.</p><p>With the help of grafana and TraceQL, we can for exemple querry every traces collected:</p><p><img loading="lazy" alt="Tempo Querry" src="/WeeboGitOps/assets/images/explore-tempo-8569ccca5295bcb8f6b89ac2a3b167b2.png" width="1105" height="962" class="img_ev3q"></p><p>At the moment not much traces are collected, but it&#x27;s a good start.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="alertmanager">AlertManager<a href="#alertmanager" class="hash-link" aria-label="Lien direct vers AlertManager" title="Lien direct vers AlertManager">​</a></h2><p>AlertManager is a service that allow to trigger alerts based on querry. It&#x27;s the main datasource of Grafana for alerts. It&#x27;s included in the Grafana ui.</p><p>Once it has been configured, it can send alerts to multiple channels like email, slack, discord, etc.</p><p>With the the help of grafana and the different querry language, we can follow the state of our alerts:</p><p><img loading="lazy" alt="Alertmanager" src="/WeeboGitOps/assets/images/explore-alert-b8cf838c69cdd9920104dd1b6b9d8e84.png" width="919" height="583" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/batleforc/WeeboGitOps/tree/Doc/Main/docs/Archi/Monitoring.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Éditer cette page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Pages de documentation"><a class="pagination-nav__link pagination-nav__link--prev" href="/WeeboGitOps/docs/Archi/CiCD"><div class="pagination-nav__sublabel">Précédent</div><div class="pagination-nav__label">CI / CD</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/WeeboGitOps/docs/Archi/Node"><div class="pagination-nav__sublabel">Suivant</div><div class="pagination-nav__label">Node</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#grafana" class="table-of-contents__link toc-highlight">Grafana</a></li><li><a href="#prometheus" class="table-of-contents__link toc-highlight">Prometheus</a></li><li><a href="#loki" class="table-of-contents__link toc-highlight">Loki</a></li><li><a href="#tempo" class="table-of-contents__link toc-highlight">Tempo</a></li><li><a href="#alertmanager" class="table-of-contents__link toc-highlight">AlertManager</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/WeeboGitOps/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/WeeboGitOps/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/batleforc/WeeboGitOps" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WeeboGitOps by Batleforc. Built with Docusaurus and lot's of coffee.</div></div></div></footer></div>
<script src="/WeeboGitOps/assets/js/runtime~main.1a317065.js"></script>
<script src="/WeeboGitOps/assets/js/main.c63e4caf.js"></script>
</body>
</html>