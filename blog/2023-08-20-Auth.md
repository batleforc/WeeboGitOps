---
slug: Auth
title: Auto Auth
authors: batleforc
tags: [Zitadel, terraform, flux, gitops, daily]
---

## What's new

During the night i finnaly found a way to automate Sonarqube with the help of... Oauth2Proxy and Terraform !!!!

## Automate me

So it's the turn of Sonarqube to be automated with... terraform again. I love this tool ! So what does the automation and upgrade does ?

- Separate Sonarqube from it's database with two helm release
- Setup Oauth2Proxy to handle the authentication of Sonarqube and ignore path that doesn't need authentication
- Setup the ingress to handle the authentication and the path to Sonarqube/Oauth2Proxy
- Automate the configuration of Sonarqube with TF
- Automate the creation of Sonarqube secret with TF
- RollBack to the previous version of Sonarqube from 10 to 9.9

### Upgrade

In order to facilitate my upgrade process, i setup [Renovate](https://www.mend.io/renovate/) to handle the upgrade of my dependencies. It's really easy to use and it's working really well. I just need to execute the renovate job daily and it create PR when needed and merge it when i think it's ok.

Well we need everything to be up to date, so i upgraded everything to the latest version available like

- No Upgrade this time

While working on the upgrade part, i ended up thinking that setting up Changelog would be a good thing. So i'm thinking of including [cog](https://docs.cocogitto.io/).

### Next to do

- [ ] Setup Changelog

While i was upgrading everything it become obvious that i need to upgrade my use of Github. Then i moved from the old Github Dashboard to [the new one](https://github.com/users/batleforc/projects/7/views/1). Event if i wasn't writing the doc, i was still working on the project and updating the dashboard and issues.
