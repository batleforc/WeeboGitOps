<!doctype html>
<html lang="fr" dir="ltr" class="blog-wrapper blog-tags-post-list-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Un article tagués avec « Layering » | WeeboGitOps</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://batleforc.weebo.fr/WeeboGitOps/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://batleforc.weebo.fr/WeeboGitOps/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://batleforc.weebo.fr/WeeboGitOps/blog/tags/layering"><meta data-rh="true" name="docusaurus_locale" content="fr"><meta data-rh="true" name="docsearch:language" content="fr"><meta data-rh="true" property="og:title" content="Un article tagués avec « Layering » | WeeboGitOps"><meta data-rh="true" name="docusaurus_tag" content="blog_tags_posts"><meta data-rh="true" name="docsearch:docusaurus_tag" content="blog_tags_posts"><link data-rh="true" rel="icon" href="/WeeboGitOps/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://batleforc.weebo.fr/WeeboGitOps/blog/tags/layering"><link data-rh="true" rel="alternate" href="https://batleforc.weebo.fr/WeeboGitOps/blog/tags/layering" hreflang="fr"><link data-rh="true" rel="alternate" href="https://batleforc.weebo.fr/WeeboGitOps/blog/tags/layering" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/WeeboGitOps/blog/rss.xml" title="WeeboGitOps RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/WeeboGitOps/blog/atom.xml" title="WeeboGitOps Atom Feed"><link rel="stylesheet" href="/WeeboGitOps/assets/css/styles.150abd4c.css">
<link rel="preload" href="/WeeboGitOps/assets/js/runtime~main.5cf966b0.js" as="script">
<link rel="preload" href="/WeeboGitOps/assets/js/main.9c720dcf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Aller au contenu principal"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Aller au contenu principal</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Ouvrir/fermer la barre de navigation" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/WeeboGitOps/"><div class="navbar__logo"><img src="/WeeboGitOps/img/logo.svg" alt="WeeboGitOps Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/WeeboGitOps/img/logo.svg" alt="WeeboGitOps Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">WeebpGitOps</b></a><a class="navbar__item navbar__link" href="/WeeboGitOps/docs/intro">Doc</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/WeeboGitOps/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/batleforc/WeeboGitOps" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Basculer entre le mode sombre et clair (actuellement mode sombre)" aria-label="Basculer entre le mode sombre et clair (actuellement mode sombre)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Navigation article de blog récent"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/WeeboGitOps/blog/layering">GitOps Layering</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/WeeboGitOps/blog/Auth">Auto Auth</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/WeeboGitOps/blog/Renovate-co">Renovate And Co</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/WeeboGitOps/blog/one-year-later">One year later</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/WeeboGitOps/blog/init-doc">Init Doc</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><header class="margin-bottom--xl"><h1>Un article tagués avec « Layering »</h1><a href="/WeeboGitOps/blog/tags">Voir tous les tags</a></header><article class="margin-bottom--xl" itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h2 class="title_f1Hy" itemprop="headline"><a itemprop="url" href="/WeeboGitOps/blog/layering">GitOps Layering</a></h2><div class="container_mt6G margin-vert--md"><time datetime="2023-09-12T00:00:00.000Z" itemprop="datePublished">12 septembre 2023</time> · <!-- -->4 minutes de lecture</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/batleforc" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/batleforc.png" alt="Maxime"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/batleforc" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Maxime</span></a></div><small class="avatar__subtitle" itemprop="description">Developer of this project</small></div></div></div></div></header><div class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="whats-new">What&#x27;s new<a href="#whats-new" class="hash-link" aria-label="Lien direct vers What&#x27;s new" title="Lien direct vers What&#x27;s new">​</a></h2><p>Well... i kinda change everything... again.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="layering-over-heaven">LAYERING OVER HEAVEN<a href="#layering-over-heaven" class="hash-link" aria-label="Lien direct vers LAYERING OVER HEAVEN" title="Lien direct vers LAYERING OVER HEAVEN">​</a></h2><p>In a attempt to fix some of the problem i had with my previous setup, i decided to change everything. I&#x27;m still using the same tools, but i&#x27;m using them differently.</p><p>What was the kind of problem if encoutered:</p><ul><li>During some deployment, some helm chart were locking all the deployment process due to a missing secret or other stuff. This was due to the fact that my depency were not well defined and that i was deploying a lot of stuff at the same time.</li><li>One of the probleme was that Zitadel was needed by a lot of other stuff like Harbor, Sonarqube... well all the app that use the SSO. So if Zitadel was not ready, the deployment of all the other app was failing and then kind of interupted the deployment process.</li><li>well... let&#x27;s talk about tekton, the version used was not the latest and during the upgrade everything broke down due to incompatible change. So i decided to upgrade everything to the latest version. During the upgrade the webhook of tekton refused to stop and overloard the cluster. So i had to force delete the webhook and broke the cluster.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gitops">GitOps<a href="#gitops" class="hash-link" aria-label="Lien direct vers GitOps" title="Lien direct vers GitOps">​</a></h3><p>The choice has been made to keep it but to change the deployment order/dependency and process. A layering process has been put in place. The idea is to have a layering of the deployment. Each layer is a set of application that are deployed together. The layer are deployed in order of requirement. The layer are:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="cni">CNI<a href="#cni" class="hash-link" aria-label="Lien direct vers CNI" title="Lien direct vers CNI">​</a></h3><p>What is a CNI ? Well it&#x27;s a Container Network Interface and it&#x27;s used to create network for container. I&#x27;m using <a href="https://cilium.io/" target="_blank" rel="noopener noreferrer">Cilium</a> as my CNI. It&#x27;s a really good CNI and it&#x27;s working really well. I&#x27;m using it in BGP mode, so i can have a really good network and i can use it to connect my cluster to my home network if needed. The setup is actually really easy but not complete at the moment. What i&#x27;m missing:</p><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Setup the Service Mesh</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Setup the Monitoring</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Setup the <a href="https://docs.cilium.io/en/stable/network/servicemesh/gateway-api/gateway-api/#what-is-gateway-api" target="_blank" rel="noopener noreferrer">Gateway Api</a> - <a href="https://gateway-api.sigs.k8s.io/" target="_blank" rel="noopener noreferrer">Doc</a></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="csi">CSI<a href="#csi" class="hash-link" aria-label="Lien direct vers CSI" title="Lien direct vers CSI">​</a></h3><p>What is a CSI ? Well it&#x27;s a Container Storage Interface and it&#x27;s used to create storage for container. I&#x27;m using <a href="https://longhorn.io/" target="_blank" rel="noopener noreferrer">Longhorn</a> as my CSI. It&#x27;s a really good CSI and it&#x27;s working really well. I&#x27;m also using it to backup my data.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gateway-api">Gateway Api<a href="#gateway-api" class="hash-link" aria-label="Lien direct vers Gateway Api" title="Lien direct vers Gateway Api">​</a></h3><p>During my search for more observability and security, i found the <a href="https://gateway-api.sigs.k8s.io/" target="_blank" rel="noopener noreferrer">Gateway Api</a> relatable has a Ingress Killer. Why does the Ingress should be replaced by the GateWay Api? The Gateway Api is more compatible with the CNI and Service Mesh. It&#x27;s also more secure and flexible by being more configurable. If you want to know more click on the link above.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade">Upgrade<a href="#upgrade" class="hash-link" aria-label="Lien direct vers Upgrade" title="Lien direct vers Upgrade">​</a></h2><p>In order to facilitate my upgrade process, i setup <a href="https://www.mend.io/renovate/" target="_blank" rel="noopener noreferrer">Renovate</a> to handle the upgrade of my dependencies. It&#x27;s really easy to use and it&#x27;s working really well. I just need to execute the renovate job daily and it create PR when needed and merge it when i think it&#x27;s ok.</p><p>Well we need everything to be up to date, so i upgraded everything to the latest version available like</p><ul><li>No Upgrade this time</li></ul><p>While working on the upgrade part, i ended up thinking that setting up Changelog would be a good thing. So i&#x27;m thinking of including <a href="https://docs.cocogitto.io/" target="_blank" rel="noopener noreferrer">cog</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-to-do">Next to do<a href="#next-to-do" class="hash-link" aria-label="Lien direct vers Next to do" title="Lien direct vers Next to do">​</a></h2><ul class="contains-task-list containsTaskList_mC6p"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Setup the Service Mesh <a href="https://github.com/batleforc/WeeboGitOps/issues/71" target="_blank" rel="noopener noreferrer">#71</a></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Setup the Monitoring/Overservability of Cilium <a href="https://github.com/batleforc/WeeboGitOps/issues/71" target="_blank" rel="noopener noreferrer">#71</a></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Migrate to the Gateway Api <a href="https://github.com/batleforc/WeeboGitOps/issues/70" target="_blank" rel="noopener noreferrer">#70</a></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Slowly secure the Harbor Cache <a href="https://github.com/batleforc/WeeboGitOps/issues/55" target="_blank" rel="noopener noreferrer">#55</a></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Include KEDA and the PodAutoScaller <a href="https://github.com/batleforc/WeeboGitOps/issues/17" target="_blank" rel="noopener noreferrer">#17</a></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Préparer l&#x27;ajout de nouveaux uttilisateurs <a href="https://github.com/batleforc/WeeboGitOps/issues/72" target="_blank" rel="noopener noreferrer">#72</a></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Travailler sur un un équivalent a Tibco BW en passant possiblement par <a href="https://knative.dev/" target="_blank" rel="noopener noreferrer">Knative</a> <a href="https://github.com/batleforc/WeeboGitOps/issues/69" target="_blank" rel="noopener noreferrer">#69</a></li></ul><p>While i was upgrading everything it become obvious that i need to upgrade my use of Github. Then i moved from the old Github Dashboard to <a href="https://github.com/users/batleforc/projects/7/views/1" target="_blank" rel="noopener noreferrer">the new one</a>. Event if i wasn&#x27;t writing the doc, i was still working on the project and updating the dashboard and issues.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><b>Tags :</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/WeeboGitOps/blog/tags/layering">Layering</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/WeeboGitOps/blog/tags/cni">CNI</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/WeeboGitOps/blog/tags/csi">CSI</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/WeeboGitOps/blog/tags/gitops">gitops</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/WeeboGitOps/blog/tags/daily">daily</a></li></ul></div></footer></article><nav class="pagination-nav" aria-label="Pagination de la liste des articles du blog"></nav></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/WeeboGitOps/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/WeeboGitOps/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/batleforc/WeeboGitOps" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WeeboGitOps by Batleforc. Built with Docusaurus and lot's of coffee.</div></div></div></footer></div>
<script src="/WeeboGitOps/assets/js/runtime~main.5cf966b0.js"></script>
<script src="/WeeboGitOps/assets/js/main.9c720dcf.js"></script>
</body>
</html>